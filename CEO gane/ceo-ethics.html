<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CEO Ethics ‚Äî Strategic Advisory System</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0f0f0f; --bg-card: #1a1a1a; --bg-elevated: #242424;
            --border: #2a2a2a; --border-light: #333;
            --text: #ffffff; --text-secondary: #a0a0a0; --text-muted: #666;
            --accent: #3b82f6; --green: #22c55e; --red: #ef4444; 
            --amber: #f59e0b; --purple: #a855f7; --cyan: #06b6d4;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }
        
        .app { display: grid; grid-template-columns: 320px 1fr 360px; min-height: 100vh; }
        
        /* Left Panel - Metrics */
        .metrics-panel { background: var(--bg-card); border-right: 1px solid var(--border); padding: 24px; overflow-y: auto; }
        .panel-title { font-size: 0.7rem; font-weight: 600; color: var(--text-muted); letter-spacing: 1.5px; margin-bottom: 20px; display: flex; align-items: center; gap: 8px; }
        .live-dot { width: 6px; height: 6px; background: var(--red); border-radius: 50%; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.4; } }
        
        .metric-card { background: var(--bg-elevated); border-radius: 12px; padding: 16px; margin-bottom: 12px; border: 1px solid var(--border); }
        .metric-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .metric-icon { font-size: 1.2rem; }
        .metric-trend { font-size: 0.7rem; font-weight: 600; padding: 3px 8px; border-radius: 4px; }
        .metric-trend.up { background: rgba(34,197,94,0.15); color: var(--green); }
        .metric-trend.down { background: rgba(239,68,68,0.15); color: var(--red); }
        .metric-trend.neutral { background: rgba(245,158,11,0.15); color: var(--amber); }
        .metric-value { font-family: 'JetBrains Mono', monospace; font-size: 1.6rem; font-weight: 700; margin-bottom: 4px; }
        .metric-label { font-size: 0.75rem; color: var(--text-secondary); }
        .metric-bar { height: 4px; background: var(--border); border-radius: 2px; margin-top: 12px; overflow: hidden; }
        .metric-bar-fill { height: 100%; border-radius: 2px; transition: width 0.5s ease; }
        .metric-bar-fill.green { background: linear-gradient(90deg, var(--green), #4ade80); }
        .metric-bar-fill.amber { background: linear-gradient(90deg, var(--amber), #fbbf24); }
        .metric-bar-fill.red { background: linear-gradient(90deg, var(--red), #f87171); }
        
        .esg-rating { display: flex; gap: 8px; margin-top: 10px; }
        .esg-badge { flex: 1; text-align: center; padding: 8px; background: var(--bg); border-radius: 8px; font-size: 0.8rem; }
        .esg-badge.active { border: 2px solid var(--accent); }
        
        /* Main Panel */
        .main-panel { padding: 30px; overflow-y: auto; max-height: 100vh; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .logo { display: flex; align-items: center; gap: 12px; }
        .logo-icon { width: 42px; height: 42px; background: linear-gradient(135deg, var(--accent), var(--purple)); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; }
        .logo-text { font-size: 1.2rem; font-weight: 700; }
        .header-time { font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: var(--text-muted); }
        
        /* Video Calls */
        .video-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 24px; }
        .video-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; overflow: hidden; transition: all 0.3s ease; }
        .video-card.speaking { border-color: var(--accent); box-shadow: 0 0 20px rgba(59,130,246,0.2); }
        .video-avatar { height: 120px; display: flex; align-items: center; justify-content: center; font-size: 3rem; position: relative; }
        .video-avatar::before { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, rgba(59,130,246,0.1), rgba(168,85,247,0.1)); }
        .video-status { position: absolute; bottom: 10px; right: 10px; width: 12px; height: 12px; background: var(--green); border-radius: 50%; border: 2px solid var(--bg-card); }
        .video-info { padding: 14px; background: var(--bg-elevated); }
        .video-name { font-weight: 600; font-size: 0.9rem; margin-bottom: 2px; }
        .video-role { font-size: 0.75rem; color: var(--text-muted); }
        .video-indicator { display: flex; align-items: center; gap: 6px; margin-top: 8px; font-size: 0.7rem; color: var(--accent); }
        .voice-bar { display: flex; gap: 2px; }
        .voice-bar span { width: 3px; height: 12px; background: var(--accent); border-radius: 1px; animation: voice 0.5s ease infinite alternate; }
        .voice-bar span:nth-child(2) { animation-delay: 0.1s; }
        .voice-bar span:nth-child(3) { animation-delay: 0.2s; }
        @keyframes voice { from { height: 4px; } to { height: 12px; } }
        
        /* Scenario Card */
        .scenario-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 20px; overflow: hidden; margin-bottom: 24px; }
        .scenario-header { padding: 20px 24px; background: var(--bg-elevated); border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .scenario-badge { display: flex; align-items: center; gap: 8px; padding: 6px 12px; background: rgba(239,68,68,0.15); border-radius: 8px; }
        .scenario-badge-dot { width: 8px; height: 8px; background: var(--red); border-radius: 50%; animation: pulse 1s infinite; }
        .scenario-badge-text { font-size: 0.75rem; font-weight: 600; color: var(--red); text-transform: uppercase; letter-spacing: 0.5px; }
        .scenario-time { font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: var(--text-muted); }
        .scenario-content { padding: 24px; }
        .scenario-title { font-size: 1.3rem; font-weight: 700; margin-bottom: 16px; }
        
        /* Technical Details */
        .tech-box { background: var(--bg); border: 1px solid var(--border); border-radius: 12px; padding: 16px; margin-bottom: 20px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; }
        .tech-label { font-size: 0.7rem; color: var(--cyan); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }
        .tech-content { color: var(--text-secondary); line-height: 1.7; }
        .tech-content .highlight { color: var(--amber); font-weight: 600; }
        .tech-content .critical { color: var(--red); font-weight: 600; }
        .tech-content .spec { color: var(--cyan); }
        
        /* Dialogue */
        .dialogue-item { display: flex; gap: 14px; padding: 16px; background: var(--bg-elevated); border-radius: 12px; margin-bottom: 12px; border-left: 3px solid var(--border); }
        .dialogue-item.lena { border-left-color: var(--purple); }
        .dialogue-item.david { border-left-color: var(--amber); }
        .dialogue-item.chloe { border-left-color: var(--green); }
        .dialogue-avatar { width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; flex-shrink: 0; }
        .dialogue-item.lena .dialogue-avatar { background: rgba(168,85,247,0.2); }
        .dialogue-item.david .dialogue-avatar { background: rgba(245,158,11,0.2); }
        .dialogue-item.chloe .dialogue-avatar { background: rgba(34,197,94,0.2); }
        .dialogue-name { font-weight: 600; font-size: 0.85rem; margin-bottom: 4px; }
        .dialogue-item.lena .dialogue-name { color: var(--purple); }
        .dialogue-item.david .dialogue-name { color: var(--amber); }
        .dialogue-item.chloe .dialogue-name { color: var(--green); }
        .dialogue-text { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; }
        .dialogue-text strong { color: var(--text); }
        
        /* Decisions */
        .decisions-title { font-size: 0.8rem; font-weight: 600; color: var(--text-muted); margin: 24px 0 16px; text-transform: uppercase; letter-spacing: 1px; }
        .decision-card { background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 14px; padding: 20px; margin-bottom: 14px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }
        .decision-card::before { content: ''; position: absolute; left: 0; top: 0; width: 4px; height: 100%; }
        .decision-card.conservative::before { background: var(--accent); }
        .decision-card.aggressive::before { background: var(--amber); }
        .decision-card.ethical::before { background: var(--green); }
        .decision-card:hover { border-color: var(--text-muted); transform: translateX(6px); }
        .decision-header { display: flex; align-items: center; gap: 14px; margin-bottom: 12px; }
        .decision-badge { width: 38px; height: 38px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1rem; }
        .decision-card.conservative .decision-badge { background: rgba(59,130,246,0.2); color: var(--accent); }
        .decision-card.aggressive .decision-badge { background: rgba(245,158,11,0.2); color: var(--amber); }
        .decision-card.ethical .decision-badge { background: rgba(34,197,94,0.2); color: var(--green); }
        .decision-type { font-size: 0.65rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted); }
        .decision-title { font-weight: 600; font-size: 0.95rem; }
        .decision-desc { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 16px; line-height: 1.5; }
        .decision-impacts { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .impact-item { background: var(--bg); border-radius: 8px; padding: 10px; text-align: center; }
        .impact-label { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px; }
        .impact-value { font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; font-weight: 600; }
        .impact-value.positive { color: var(--green); }
        .impact-value.negative { color: var(--red); }
        .impact-value.neutral { color: var(--amber); }
        
        /* Right Panel - Activity */
        .activity-panel { background: var(--bg-card); border-left: 1px solid var(--border); padding: 24px; overflow-y: auto; }
        .activity-item { display: flex; gap: 12px; padding: 14px 0; border-bottom: 1px solid var(--border); }
        .activity-icon { width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; flex-shrink: 0; }
        .activity-icon.alert { background: rgba(239,68,68,0.15); }
        .activity-icon.update { background: rgba(59,130,246,0.15); }
        .activity-icon.success { background: rgba(34,197,94,0.15); }
        .activity-text { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5; }
        .activity-time { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--text-muted); margin-top: 4px; }
        
        /* Auth Overlay */
        .auth-overlay { position: fixed; inset: 0; background: var(--bg); display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .auth-overlay.hidden { display: none; }
        .auth-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 24px; padding: 48px; max-width: 480px; width: 100%; text-align: center; }
        .auth-icon { font-size: 3rem; margin-bottom: 20px; }
        .auth-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 8px; }
        .auth-subtitle { font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 32px; }
        .auth-field { margin-bottom: 16px; text-align: left; }
        .auth-label { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 8px; display: block; }
        .auth-input, .auth-select { width: 100%; padding: 14px 18px; background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 10px; color: var(--text); font-family: inherit; font-size: 1rem; outline: none; }
        .auth-input:focus, .auth-select:focus { border-color: var(--accent); }
        .auth-select { cursor: pointer; appearance: none; }
        .auth-btn { width: 100%; padding: 16px; background: linear-gradient(135deg, var(--accent), var(--purple)); border: none; border-radius: 12px; color: white; font-family: inherit; font-size: 1rem; font-weight: 600; cursor: pointer; margin-top: 16px; transition: transform 0.2s; }
        .auth-btn:hover { transform: translateY(-2px); }
        
        /* Result Modal */
        .result-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(8px); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .result-overlay.active { display: flex; }
        .result-modal { background: var(--bg-card); border: 1px solid var(--border); border-radius: 20px; padding: 40px; max-width: 500px; text-align: center; }
        .result-icon { font-size: 3rem; margin-bottom: 20px; }
        .result-title { font-size: 1.3rem; font-weight: 700; margin-bottom: 12px; }
        .result-text { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.7; margin-bottom: 24px; }
        .result-changes { display: flex; justify-content: center; gap: 24px; margin-bottom: 28px; padding: 20px; background: var(--bg-elevated); border-radius: 12px; }
        .result-change { text-align: center; }
        .result-change-icon { font-size: 1.5rem; margin-bottom: 6px; }
        .result-change-value { font-family: 'JetBrains Mono', monospace; font-size: 1rem; font-weight: 700; }
        .result-change-value.up { color: var(--green); }
        .result-change-value.down { color: var(--red); }
        .result-change-label { font-size: 0.7rem; color: var(--text-muted); margin-top: 4px; }
        .result-btn { padding: 14px 36px; background: var(--accent); border: none; border-radius: 10px; color: white; font-family: inherit; font-size: 1rem; font-weight: 600; cursor: pointer; }
    </style>
</head>
<body>
    <!-- Auth -->
    <div class="auth-overlay" id="authOverlay">
        <div class="auth-card">
            <div class="auth-icon">‚öôÔ∏è</div>
            <h1 class="auth-title">CEO Ethics Simulator</h1>
            <p class="auth-subtitle">H·ªá th·ªëng c·ªë v·∫•n chi·∫øn l∆∞·ª£c c·∫•p cao<br>Technical ‚Ä¢ Financial ‚Ä¢ Ethical</p>
            <div class="auth-field">
                <label class="auth-label">T√™n c√¥ng ty</label>
                <input type="text" class="auth-input" id="companyInput" placeholder="VD: Quantum Semiconductor">
            </div>
            <div class="auth-field">
                <label class="auth-label">Ng√†nh ngh·ªÅ (S·∫£n xu·∫•t / C√¥ng ngh·ªá s√¢u)</label>
                <select class="auth-select" id="industrySelect">
                    <option value="">Ch·ªçn ng√†nh...</option>
                    <option value="semiconductor">B√°n d·∫´n & Vi m·∫°ch</option>
                    <option value="automotive">√î t√¥ & Pin ƒëi·ªán</option>
                    <option value="pharma">D∆∞·ª£c ph·∫©m & Biotech</option>
                    <option value="aerospace">H√†ng kh√¥ng & V≈© tr·ª•</option>
                    <option value="energy">NƒÉng l∆∞·ª£ng & Hydrogen</option>
                </select>
            </div>
            <button class="auth-btn" onclick="startGame()">Kh·ªüi ƒë·ªông h·ªá th·ªëng ‚Üí</button>
        </div>
    </div>

    <!-- Main App -->
    <div class="app">
        <!-- Left Panel -->
        <div class="metrics-panel">
            <div class="panel-title"><span class="live-dot"></span> REAL-TIME METRICS</div>
            <div class="metric-card">
                <div class="metric-header"><span class="metric-icon">üìà</span><span class="metric-trend up" id="marginTrend">‚Üë 0.3%</span></div>
                <div class="metric-value" id="marginValue">18.4%</div>
                <div class="metric-label">T·ª∑ su·∫•t L·ª£i nhu·∫≠n (Margin)</div>
                <div class="metric-bar"><div class="metric-bar-fill green" id="marginBar" style="width:75%"></div></div>
            </div>
            <div class="metric-card">
                <div class="metric-header"><span class="metric-icon">üë•</span><span class="metric-trend neutral" id="headcountTrend">‚Äî 0</span></div>
                <div class="metric-value" id="headcountValue">12,450</div>
                <div class="metric-label">Nh√¢n s·ª± To√†n c·∫ßu</div>
            </div>
            <div class="metric-card">
                <div class="metric-header"><span class="metric-icon">üòå</span><span class="metric-trend up" id="esatTrend">‚Üë 2%</span></div>
                <div class="metric-value" id="esatValue">74%</div>
                <div class="metric-label">E-SAT Score (H√†i l√≤ng NV)</div>
                <div class="metric-bar"><div class="metric-bar-fill green" id="esatBar" style="width:74%"></div></div>
            </div>
            <div class="metric-card">
                <div class="metric-header"><span class="metric-icon">üåê</span><span class="metric-trend up">ESG</span></div>
                <div class="metric-label" style="margin-bottom:10px">ƒê·∫°o ƒë·ª©c & Danh ti·∫øng</div>
                <div class="esg-rating">
                    <div class="esg-badge" id="esgA">A+</div>
                    <div class="esg-badge active" id="esgB">B+</div>
                    <div class="esg-badge" id="esgC">C</div>
                </div>
            </div>
            <div class="metric-card">
                <div class="metric-header"><span class="metric-icon">üì¶</span><span class="metric-trend neutral" id="supplyTrend">C√¢n b·∫±ng</span></div>
                <div class="metric-value" id="supplyValue">‚úì</div>
                <div class="metric-label">Chu·ªói Cung ·ª©ng</div>
                <div class="metric-bar"><div class="metric-bar-fill amber" id="supplyBar" style="width:60%"></div></div>
            </div>
        </div>

        <!-- Main Panel -->
        <div class="main-panel">
            <header class="header">
                <div class="logo"><div class="logo-icon">‚öôÔ∏è</div><span class="logo-text">CEO Ethics</span></div>
                <div class="header-time" id="headerTime"></div>
            </header>
            
            <div class="video-grid" id="videoGrid"></div>
            <div class="scenario-card" id="scenarioCard"></div>
        </div>

        <!-- Right Panel -->
        <div class="activity-panel">
            <div class="panel-title">ACTIVITY LOG</div>
            <div id="activityLog"></div>
        </div>
    </div>

    <!-- Result Modal -->
    <div class="result-overlay" id="resultOverlay">
        <div class="result-modal">
            <div class="result-icon" id="resultIcon">‚ú®</div>
            <h3 class="result-title" id="resultTitle">K·∫øt qu·∫£</h3>
            <p class="result-text" id="resultText"></p>
            <div class="result-changes" id="resultChanges"></div>
            <button class="result-btn" onclick="continueGame()">Ti·∫øp t·ª•c ‚Üí</button>
        </div>
    </div>

    <script>
        const state = {
            company: '', industry: '', margin: 18.4, headcount: 12450, esat: 74, esg: 'B+', supply: 'balanced', currentScenario: 0
        };

        const characters = {
            lena: { name: 'Dr. Lena', role: 'CTO - C√¥ng ngh·ªá', emoji: 'üë©‚Äçüî¨', focus: 'Technical' },
            david: { name: 'Mr. David', role: 'COO - V·∫≠n h√†nh', emoji: 'üë®‚Äçüîß', focus: 'Operations' },
            chloe: { name: 'Ms. Chloe', role: 'CLO - Ph√°p l√Ω/ƒê·∫°o ƒë·ª©c', emoji: 'üë©‚Äç‚öñÔ∏è', focus: 'Ethics' }
        };

        const scenarios = [
            {
                title: 'L·ªói Vi m·∫°ch trong D√¢y chuy·ªÅn S·∫£n xu·∫•t',
                badge: 'KH·∫®N C·∫§P',
                tech: {
                    label: 'B√ÅO C√ÅO K·ª∏ THU·∫¨T ‚Äî CRITICAL DEFECT #QC-2847',
                    content: `Linh ki·ªán: <span class="spec">MOSFET SiC Gen4</span> t·ª´ nh√† cung c·∫•p <span class="highlight">TechCore Materials</span><br>
V·∫≠t li·ªáu: Silicon Carbide <span class="highlight">4H-SiC substrate</span><br>
L·ªói ph√°t hi·ªán: ƒê·ªô tinh khi·∫øt ch·ªâ ƒë·∫°t <span class="critical">99.97%</span> (y√™u c·∫ßu: 99.995%)<br>
Ng∆∞·ª°ng nhi·ªát ƒë·ªô ho·∫°t ƒë·ªông: <span class="critical">175¬∞C</span> (spec: 200¬∞C)<br>
T·ª∑ l·ªá h·ªèng: <span class="critical">7/1000 ƒë∆°n v·ªã</span> sau 2000h v·∫≠n h√†nh<br>
S·ªë l∆∞·ª£ng b·ªã ·∫£nh h∆∞·ªüng: <span class="critical">45,000 chip</span> ƒë√£ xu·∫•t x∆∞·ªüng`
                },
                dialogues: [
                    { char: 'lena', text: 'CEO, ƒë√¢y l√† l·ªói nghi√™m tr·ªçng v·ªÅ <strong>ƒë·ªô tinh khi·∫øt v·∫≠t li·ªáu</strong>. Substrate 4H-SiC kh√¥ng ƒë·∫°t chu·∫©n s·∫Ω g√¢y <strong>thermal runaway</strong> ·ªü nhi·ªát ƒë·ªô cao. Gi·∫£i ph√°p k·ªπ thu·∫≠t: thay ƒë·ªïi nh√† cung c·∫•p sang Infineon ho·∫∑c Wolfspeed, chi ph√≠ tƒÉng <strong>23%</strong> nh∆∞ng ƒë·∫£m b·∫£o spec.' },
                    { char: 'david', text: 'N·∫øu thu h·ªìi 45,000 chip, lead time s·∫£n xu·∫•t s·∫Ω tƒÉng <strong>6-8 tu·∫ßn</strong>. C√°c ƒë∆°n h√†ng Q4 t·ª´ Tesla v√† BMW s·∫Ω b·ªã delay. Kh√°ch h√†ng ƒëang g√¢y √°p l·ª±c c·ª±c l·ªõn ‚Äî h·ªç ƒëe d·ªça chuy·ªÉn sang TSMC.' },
                    { char: 'chloe', text: 'T√¥i ph·∫£i c·∫£nh b√°o: n·∫øu kh√¥ng thu h·ªìi v√† c√≥ <strong>m·ªôt v·ª• ch√°y</strong> do thermal failure, ch√∫ng ta ƒë·ªëi m·∫∑t class-action lawsuit. ∆Ø·ªõc t√≠nh thi·ªát h·∫°i: <strong>$2-5 t·ª∑</strong>. ESG rating s·∫Ω r∆°i xu·ªëng <strong>C</strong> ngay l·∫≠p t·ª©c.' }
                ],
                decisions: [
                    {
                        type: 'conservative', letter: 'A', title: 'Thu h·ªìi to√†n b·ªô & Thay nh√† cung c·∫•p',
                        desc: 'Recall 45,000 chip, chuy·ªÉn sang Wolfspeed v·ªõi substrate ch·∫•t l∆∞·ª£ng cao h∆°n. ƒê·∫£m b·∫£o an to√†n tuy·ªát ƒë·ªëi.',
                        impacts: [
                            { label: 'Margin', value: '-4.2%', class: 'negative' },
                            { label: 'Ch·∫•t l∆∞·ª£ng', value: '+99.9%', class: 'positive' },
                            { label: 'ESG', value: 'A+', class: 'positive' }
                        ],
                        result: { icon: '‚úÖ', title: 'Quy·∫øt ƒë·ªãnh an to√†n ƒë∆∞·ª£c th·ª±c thi', text: 'Dr. Lena th·ªü ph√†o nh·∫π nh√µm tr√™n m√†n h√¨nh. "ƒê√¢y l√† quy·∫øt ƒë·ªãnh ƒë√∫ng ƒë·∫Øn v·ªÅ m·∫∑t k·ªπ thu·∫≠t." Mr. David g·∫≠t ƒë·∫ßu nh∆∞ng lo l·∫Øng v·ªÅ deadline. Ms. Chloe m·ªâm c∆∞·ªùi ‚Äî danh ti·∫øng c√¥ng ty ƒë∆∞·ª£c b·∫£o v·ªá.', changes: [{ icon: 'üìâ', value: '-4.2%', label: 'Margin', up: false }, { icon: 'üåê', value: 'A+', label: 'ESG', up: true }, { icon: '‚è±Ô∏è', value: '+6 tu·∫ßn', label: 'Lead time', up: false }] }
                    },
                    {
                        type: 'aggressive', letter: 'B', title: 'Ti·∫øp t·ª•c s·∫£n xu·∫•t v·ªõi c·∫£nh b√°o gi·ªõi h·∫°n nhi·ªát ƒë·ªô',
                        desc: 'Kh√¥ng thu h·ªìi, ch·ªâ g·ª≠i th√¥ng b√°o k·ªπ thu·∫≠t cho kh√°ch h√†ng v·ªÅ gi·ªõi h·∫°n nhi·ªát ƒë·ªô 175¬∞C. Ti·∫øt ki·ªám chi ph√≠.',
                        impacts: [
                            { label: 'Margin', value: '+0.5%', class: 'positive' },
                            { label: 'R·ªßi ro', value: 'R·∫§T CAO', class: 'negative' },
                            { label: 'ESG', value: 'C', class: 'negative' }
                        ],
                        result: { icon: '‚ö†Ô∏è', title: 'R·ªßi ro ƒë·∫°o ƒë·ª©c cao', text: 'Ms. Chloe l·∫Øc ƒë·∫ßu th·∫•t v·ªçng tr√™n m√†n h√¨nh. "T√¥i s·∫Ω ghi nh·∫≠n quy·∫øt ƒë·ªãnh n√†y trong bi√™n b·∫£n." Dr. Lena im l·∫∑ng ‚Äî c√¥ ·∫•y kh√¥ng ƒë·ªìng √Ω nh∆∞ng tu√¢n th·ªß. M·ªôt qu·∫£ bom h·∫πn gi·ªù ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t.', changes: [{ icon: 'üìà', value: '+0.5%', label: 'Margin', up: true }, { icon: 'üåê', value: 'C', label: 'ESG', up: false }, { icon: '‚ö†Ô∏è', value: 'HIGH', label: 'R·ªßi ro ph√°p l√Ω', up: false }] }
                    },
                    {
                        type: 'ethical', letter: 'C', title: 'Thu h·ªìi c√≥ ch·ªçn l·ªçc + Qu·ªπ b·ªìi th∆∞·ªùng kh√°ch h√†ng',
                        desc: 'Ch·ªâ thu h·ªìi chip t·ª´ c√°c ·ª©ng d·ª•ng nhi·ªát ƒë·ªô cao (EV). L·∫≠p qu·ªπ $50M ƒë·ªÉ h·ªó tr·ª£ kh√°ch h√†ng b·ªã ·∫£nh h∆∞·ªüng.',
                        impacts: [
                            { label: 'Margin', value: '-2.1%', class: 'negative' },
                            { label: 'Quan h·ªá KH', value: '+15%', class: 'positive' },
                            { label: 'ESG', value: 'B+', class: 'neutral' }
                        ],
                        result: { icon: 'ü§ù', title: 'C√¢n b·∫±ng ƒë∆∞·ª£c thi·∫øt l·∫≠p', text: 'C·∫£ ba nh√¢n v·∫≠t g·∫≠t ƒë·∫ßu tr√™n m√†n h√¨nh. "ƒê√¢y l√† gi·∫£i ph√°p s√°ng t·∫°o," Dr. Lena n√≥i. Mr. David th·ªü ph√†o v√¨ kh√¥ng m·∫•t to√†n b·ªô ƒë∆°n h√†ng. Ms. Chloe h√†i l√≤ng v·ªõi qu·ªπ b·ªìi th∆∞·ªùng ‚Äî thi·ªán ch√≠ ƒë∆∞·ª£c th·ªÉ hi·ªán.', changes: [{ icon: 'üìâ', value: '-2.1%', label: 'Margin', up: false }, { icon: 'ü§ù', value: '+15%', label: 'Kh√°ch h√†ng', up: true }, { icon: 'üåê', value: 'B+', label: 'ESG', up: true }] }
                    }
                ]
            },
            {
                title: 'Quy·∫øt ƒë·ªãnh T·ª± ƒë·ªông h√≥a & C·∫Øt gi·∫£m Nh√¢n s·ª±',
                badge: 'CHI·∫æN L∆Ø·ª¢C',
                tech: {
                    label: 'B√ÅO C√ÅO PH√ÇN T√çCH ‚Äî AUTOMATION IMPACT STUDY',
                    content: `H·ªá th·ªëng: <span class="spec">Robotic Assembly Line v3.0</span> + <span class="spec">ML Quality Control</span><br>
Hi·ªáu su·∫•t d·ª± ki·∫øn: TƒÉng <span class="highlight">47% throughput</span>, gi·∫£m <span class="highlight">89% defect rate</span><br>
Chi ph√≠ tri·ªÉn khai: <span class="highlight">$120M</span> (ROI: 18 th√°ng)<br>
Nh√¢n s·ª± b·ªã ·∫£nh h∆∞·ªüng: <span class="critical">2,400 v·ªã tr√≠</span> t·∫°i 3 nh√† m√°y<br>
K·ªπ nƒÉng c·∫ßn ƒë√†o t·∫°o l·∫°i: <span class="spec">AI/ML Operations, Robotics Maintenance</span><br>
Th·ªùi gian chuy·ªÉn ƒë·ªïi: <span class="highlight">12-18 th√°ng</span>`
                },
                dialogues: [
                    { char: 'lena', text: 'ƒê√¢y l√† <strong>b∆∞·ªõc nh·∫£y c√¥ng ngh·ªá</strong> c·∫ßn thi·∫øt. H·ªá th·ªëng ML Quality Control c√≥ th·ªÉ ph√°t hi·ªán defect ·ªü m·ª©c <strong>nanometer</strong> ‚Äî con ng∆∞·ªùi kh√¥ng th·ªÉ l√†m ƒë∆∞·ª£c. N·∫øu kh√¥ng t·ª± ƒë·ªông h√≥a, ch√∫ng ta s·∫Ω t·ª•t h·∫≠u so v·ªõi Samsung v√† Intel trong 2 nƒÉm.' },
                    { char: 'david', text: '2,400 c√¥ng nh√¢n... nhi·ªÅu ng∆∞·ªùi ƒë√£ l√†m vi·ªác ·ªü ƒë√¢y <strong>15-20 nƒÉm</strong>. Nh√† m√°y t·∫°i B√¨nh D∆∞∆°ng s·∫Ω m·∫•t <strong>60% nh√¢n s·ª±</strong>. C√¥ng ƒëo√†n ƒëang chu·∫©n b·ªã ph·∫£n ·ª©ng. N·∫øu kh√¥ng x·ª≠ l√Ω kh√©o, c√≥ th·ªÉ x·∫£y ra <strong>ƒë√¨nh c√¥ng</strong>.' },
                    { char: 'chloe', text: 'V·ªÅ m·∫∑t ph√°p l√Ω, ch√∫ng ta ph·∫£i tu√¢n th·ªß quy ƒë·ªãnh <strong>Th√¥ng b√°o tr∆∞·ªõc 60 ng√†y</strong> theo lu·∫≠t lao ƒë·ªông. V·ªÅ m·∫∑t ƒë·∫°o ƒë·ª©c ‚Äî ƒë√¢y l√† quy·∫øt ƒë·ªãnh s·∫Ω <strong>thay ƒë·ªïi cu·ªôc s·ªëng 2,400 gia ƒë√¨nh</strong>. ESG investors ƒëang theo d√µi.' }
                ],
                decisions: [
                    {
                        type: 'conservative', letter: 'A', title: 'T·ª± ƒë·ªông h√≥a t·ª´ t·ª´ + ƒê√†o t·∫°o l·∫°i 100%',
                        desc: 'Tri·ªÉn khai trong 3 nƒÉm, ƒë·∫£m b·∫£o m·ªçi nh√¢n vi√™n ƒë∆∞·ª£c ƒë√†o t·∫°o l·∫°i ho·∫∑c chuy·ªÉn ƒë·ªïi vai tr√≤. Kh√¥ng sa th·∫£i.',
                        impacts: [
                            { label: 'Chi ph√≠', value: '+$80M', class: 'negative' },
                            { label: 'E-SAT', value: '+12%', class: 'positive' },
                            { label: 'ESG', value: 'A+', class: 'positive' }
                        ],
                        result: { icon: 'üíö', title: 'Nh√¢n vi√™n l√† ∆∞u ti√™n', text: 'M√†n h√¨nh c·ªßa Mr. David s√°ng l√™n v·ªõi n·ª• c∆∞·ªùi nh·∫π nh√µm. Ms. Chloe g·∫≠t ƒë·∫ßu t√°n th∆∞·ªüng. Dr. Lena h∆°i th·∫•t v·ªçng v·ªÅ timeline nh∆∞ng hi·ªÉu quy·∫øt ƒë·ªãnh. E-SAT score tƒÉng v·ªçt ‚Äî nh√¢n vi√™n tin t∆∞·ªüng l√£nh ƒë·∫°o.', changes: [{ icon: 'üí∞', value: '+$80M', label: 'Chi ph√≠', up: false }, { icon: 'üòå', value: '+12%', label: 'E-SAT', up: true }, { icon: 'üåê', value: 'A+', label: 'ESG', up: true }] }
                    },
                    {
                        type: 'aggressive', letter: 'B', title: 'T·ª± ƒë·ªông h√≥a nhanh + G√≥i th√¥i vi·ªác h√†o ph√≥ng',
                        desc: 'Tri·ªÉn khai trong 12 th√°ng. G√≥i th√¥i vi·ªác 12 th√°ng l∆∞∆°ng cho t·∫•t c·∫£ nh√¢n vi√™n b·ªã ·∫£nh h∆∞·ªüng.',
                        impacts: [
                            { label: 'Margin', value: '+6.2%', class: 'positive' },
                            { label: 'E-SAT', value: '-18%', class: 'negative' },
                            { label: 'ESG', value: 'B-', class: 'neutral' }
                        ],
                        result: { icon: '‚ö°', title: 'T·ªëc ƒë·ªô ƒë∆∞·ª£c ∆∞u ti√™n', text: 'Dr. Lena v·ªó tay nh·∫π ‚Äî timeline ƒë·∫°t y√™u c·∫ßu. Mr. David im l·∫∑ng, ƒëang nghƒ© v·ªÅ nh·ªØng cu·ªôc tr√≤ chuy·ªán kh√≥ khƒÉn s·∫Øp t·ªõi. Ms. Chloe chu·∫©n b·ªã c√°c th·ªß t·ª•c ph√°p l√Ω. Hi·ªáu qu·∫£ tƒÉng, nh∆∞ng gi√° ph·∫£i tr·∫£ l√† l√≤ng tin n·ªôi b·ªô.', changes: [{ icon: 'üìà', value: '+6.2%', label: 'Margin', up: true }, { icon: 'üò∞', value: '-18%', label: 'E-SAT', up: false }, { icon: '‚è±Ô∏è', value: '12 th√°ng', label: 'Timeline', up: true }] }
                    },
                    {
                        type: 'ethical', letter: 'C', title: 'Spin-off nh√† m√°y c≈© th√†nh c√¥ng ty con',
                        desc: 'T·ª± ƒë·ªông h√≥a nh√† m√°y m·ªõi, chuy·ªÉn 2,400 nh√¢n vi√™n sang c√¥ng ty con chuy√™n s·∫£n xu·∫•t legacy products.',
                        impacts: [
                            { label: 'Chi ph√≠', value: '+$40M', class: 'negative' },
                            { label: 'Headcount', value: '0', class: 'positive' },
                            { label: 'ESG', value: 'A', class: 'positive' }
                        ],
                        result: { icon: 'üè≠', title: 'M√¥ h√¨nh s√°ng t·∫°o', text: 'C·∫£ ba nh√¢n v·∫≠t ƒë·ªÅu ng·∫°c nhi√™n v·ªõi gi·∫£i ph√°p. "T√¥i ch∆∞a nghƒ© ƒë·∫øn ƒëi·ªÅu n√†y," Dr. Lena th·ª´a nh·∫≠n. Mr. David th·ªü ph√†o ‚Äî kh√¥ng ai m·∫•t vi·ªác. Ms. Chloe ƒë√°nh gi√° cao t√≠nh s√°ng t·∫°o trong vi·ªác b·∫£o v·ªá nh√¢n vi√™n.', changes: [{ icon: 'üí∞', value: '+$40M', label: 'ƒê·∫ßu t∆∞', up: false }, { icon: 'üë•', value: '0', label: 'Sa th·∫£i', up: true }, { icon: 'üè≠', value: '+1', label: 'C√¥ng ty con', up: true }] }
                    }
                ]
            }
        ];

        function startGame() {
            state.company = document.getElementById('companyInput').value || 'Quantum Semiconductor';
            state.industry = document.getElementById('industrySelect').value || 'semiconductor';
            document.getElementById('authOverlay').classList.add('hidden');
            renderScene();
            addActivity('success', 'H·ªá th·ªëng c·ªë v·∫•n chi·∫øn l∆∞·ª£c ƒë√£ kh·ªüi ƒë·ªông');
        }

        function renderScene() {
            const s = scenarios[state.currentScenario];
            
            // Video grid
            document.getElementById('videoGrid').innerHTML = Object.entries(characters).map(([key, char], i) => `
                <div class="video-card ${i === 0 ? 'speaking' : ''}">
                    <div class="video-avatar">${char.emoji}<div class="video-status"></div></div>
                    <div class="video-info">
                        <div class="video-name">${char.name}</div>
                        <div class="video-role">${char.role}</div>
                        ${i === 0 ? '<div class="video-indicator"><div class="voice-bar"><span></span><span></span><span></span></div> ƒêang n√≥i...</div>' : ''}
                    </div>
                </div>
            `).join('');
            
            // Scenario
            document.getElementById('scenarioCard').innerHTML = `
                <div class="scenario-header">
                    <div class="scenario-badge"><span class="scenario-badge-dot"></span><span class="scenario-badge-text">${s.badge}</span></div>
                    <div class="scenario-time">Q4 2025 ‚Äî Tu·∫ßn ${state.currentScenario + 1}</div>
                </div>
                <div class="scenario-content">
                    <h2 class="scenario-title">${s.title}</h2>
                    <div class="tech-box">
                        <div class="tech-label">${s.tech.label}</div>
                        <div class="tech-content">${s.tech.content}</div>
                    </div>
                    ${s.dialogues.map(d => `
                        <div class="dialogue-item ${d.char}">
                            <div class="dialogue-avatar">${characters[d.char].emoji}</div>
                            <div>
                                <div class="dialogue-name">${characters[d.char].name}</div>
                                <div class="dialogue-text">${d.text}</div>
                            </div>
                        </div>
                    `).join('')}
                    <div class="decisions-title">Quy·∫øt ƒë·ªãnh c·ªßa CEO</div>
                    ${s.decisions.map((d, i) => `
                        <div class="decision-card ${d.type}" onclick="makeDecision(${i})">
                            <div class="decision-header">
                                <div class="decision-badge">${d.letter}</div>
                                <div><div class="decision-type">${d.type === 'conservative' ? 'Th·∫≠n tr·ªçng' : d.type === 'aggressive' ? 'Quy·∫øt li·ªát' : 'ƒê·∫°o ƒë·ª©c'}</div>
                                <div class="decision-title">${d.title}</div></div>
                            </div>
                            <div class="decision-desc">${d.desc}</div>
                            <div class="decision-impacts">
                                ${d.impacts.map(imp => `<div class="impact-item"><div class="impact-label">${imp.label}</div><div class="impact-value ${imp.class}">${imp.value}</div></div>`).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            updateMetrics();
        }

        function makeDecision(index) {
            const s = scenarios[state.currentScenario];
            const d = s.decisions[index];
            const r = d.result;
            
            document.getElementById('resultIcon').textContent = r.icon;
            document.getElementById('resultTitle').textContent = r.title;
            document.getElementById('resultText').textContent = r.text;
            document.getElementById('resultChanges').innerHTML = r.changes.map(c => `
                <div class="result-change">
                    <div class="result-change-icon">${c.icon}</div>
                    <div class="result-change-value ${c.up ? 'up' : 'down'}">${c.value}</div>
                    <div class="result-change-label">${c.label}</div>
                </div>
            `).join('');
            
            document.getElementById('resultOverlay').classList.add('active');
            addActivity('update', `CEO ƒë√£ ch·ªçn: ${d.title}`);
            
            // Update state based on decision
            if (d.type === 'conservative') { state.esg = 'A+'; state.esat += 5; }
            else if (d.type === 'aggressive') { state.margin += 2; state.esat -= 10; state.esg = 'B-'; }
            else { state.esat += 3; }
        }

        function continueGame() {
            document.getElementById('resultOverlay').classList.remove('active');
            state.currentScenario = (state.currentScenario + 1) % scenarios.length;
            renderScene();
        }

        function updateMetrics() {
            document.getElementById('marginValue').textContent = state.margin.toFixed(1) + '%';
            document.getElementById('headcountValue').textContent = state.headcount.toLocaleString();
            document.getElementById('esatValue').textContent = state.esat + '%';
            document.getElementById('esatBar').style.width = state.esat + '%';
            
            ['A', 'B', 'C'].forEach(l => document.getElementById('esg' + l).classList.remove('active'));
            if (state.esg.startsWith('A')) document.getElementById('esgA').classList.add('active');
            else if (state.esg.startsWith('B')) document.getElementById('esgB').classList.add('active');
            else document.getElementById('esgC').classList.add('active');
        }

        function addActivity(type, text) {
            const log = document.getElementById('activityLog');
            const icons = { alert: '‚ö†Ô∏è', update: 'üìù', success: '‚úÖ' };
            log.innerHTML = `<div class="activity-item"><div class="activity-icon ${type}">${icons[type]}</div><div><div class="activity-text">${text}</div><div class="activity-time">V·ª´a xong</div></div></div>` + log.innerHTML;
        }

        // Time
        setInterval(() => {
            document.getElementById('headerTime').textContent = new Date().toLocaleString('vi-VN', { weekday: 'long', hour: '2-digit', minute: '2-digit', second: '2-digit' });
        }, 1000);
    </script>
</body>
</html>

